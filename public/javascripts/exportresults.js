const LOC_CSV="Download in CSV format";const LOC_XLS="Download in XLS format";const LOC_CLOSE="Close";const LOC_EXPORTRESULTS="Export Results";const LOC_EXPORT_IMAGES="The survey you want to export has images in its results. Do you want to export the images as well?";const LOC_EXPORT_FORMAT="Please, select below the file format to export results.";const LOC_YES="Yes";const LOC_NO="No";var ExportResults=function(){var a;var j;var g;function f(l){a=true;j=l;c()}function k(m,l){j=m;g=l;a=false;c()}function c(){exportDialog.dialog({title:LOC_EXPORTRESULTS,open:function(){$(".ui-widget-overlay").hide().fadeIn()},show:"fade",hide:"fade"});exportDialog.dialog("open");$("#exportResults-step_1").empty();$("#exportResults-step_2").empty();$("#exportResults-step_3").empty();$("#exportResults-step_1").append(LOC_EXPORT_FORMAT);$("#exportResults-step_1").append('<button id="buttonCSV" class="buttonCSV" type="button" title="'+LOC_CSV+'"/>');$("#exportResults-step_1").append('<button id="buttonXLS" class="buttonXLS" type="button" title="'+LOC_XLS+'"/>');$("#buttonCSV").click(function(){d()});$("#buttonXLS").click(function(){i()})}function d(){$.getJSON("/service/surveyHasImages",{surveyId:j},function(l){e(".CSV",l.hasImages)})}function i(){$.getJSON("/service/surveyHasImages",{surveyId:j},function(l){e(".XLS",l.hasImages)})}function e(m,l){$("#exportResults-step_1").empty();if(l){$("#exportResults-step_2").append(LOC_EXPORT_IMAGES);$("#exportResults-step_2").append('<button id="buttonYES" type="button" title="'+LOC_YES+'">'+LOC_YES+"</button>");$("#exportResults-step_2").append('<button id="buttonNO" type="button" title="'+LOC_NO+'">'+LOC_NO+"</button>");$("#buttonYES").click(function(n){h(m,n)});$("#buttonNO").click(function(n){h(m,n)})}else{b(m,false)}}function h(m,l){b(m,(l.currentTarget.id=="buttonYES"))}function b(m,l){$("#exportResults-step_2").empty();$("#exportResults-step_3").append('<img src="images/POPUP_ICON_LOADING.gif" />');$("#exportResults-step_3").append("<b>Exporting survey results to"+m+" file...</>");if(a){window.location.href="/service/prepare?surveyId="+j+"&fileFormat="+m+"&exportWithImages="+l}else{window.location.href="/service/prepareselected?ids="+g.join(",")+"&fileFormat="+m+"&exportWithImages="+l}exportDialog.dialog("close")}return{exportResults:function(m,l){k(m,l)},exportAllResults:function(l){f(l)}}}();