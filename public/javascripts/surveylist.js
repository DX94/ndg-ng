const LOC_DOWNLOAD="Download";const LOC_UPLOAD="Upload";const LOC_EDIT="Edit";const LOC_DUPLICATE="Duplicate";const LOC_DELETE="Delete";const LOC_SEND="Send";const LOC_SURVEY_NAME="Survey Name";const LOC_DATE_PUBLISHED="Date Published";const LOC_PUBLISHER="Publisher";const LOC_RESULTS="Results";const LOC_SURVEYID="SurveyId";var SurveyList=function(){const w=" \u2191";const c=" \u2193";var m=0;var G=true;var s=true;var j=true;var n=true;var x="title";var I=true;var H=1;return{showSurveyList:function(){q()}};function q(){$("#minimalist").append('<thead><tr><th scope="col"><a href="#" id="executeSortBySurveyName"><b>'+LOC_SURVEY_NAME+'</b></th><th scope="col"><a href="#" id="executeSortByDatePublished"><b>'+LOC_DATE_PUBLISHED+'</b></th><th scope="col"><a href="#" id="executeSortByPublisher"><b>'+LOC_PUBLISHER+'</b></th><th scope="col"><a href="#" id="executeSortByResults"><b>'+LOC_RESULTS+'</b></th><th scope="col"></th></tr></thead><tbody id="surveyListTable"></tbody>');$("#executeSortBySurveyName").click(function(){p()});$("#executeSortByDatePublished").click(function(){h()});$("#executeSortByPublisher").click(function(){b()});$("#executeSortByResults").click(function(){t()});$("#uploadForm").submit(function(){C()});$.getJSON("/application/listsurveyscount",function(J){o(J)});l(x,G)}function o(J){H=J.surveysCount;D()}function D(){$("#navi").empty();$("#navi").append('<a href="#" id="executePreviousButton"><img id="prev_button" src="images/icon_previous_off.jpg"></a>'+(m+1)+" of "+H+'<a href="#" id="executeNextButton"><img id="next_button" src="images/icon_next_off.jpg"></a>');$("#prev_button").mouseover(function(){z()});$("#prev_button").mouseout(function(){u()});$("#next_button").mouseover(function(){i()});$("#next_button").mouseout(function(){f()});$("#executePreviousButton").click(function(){k()});$("#executeNextButton").click(function(){e()})}function l(J,K){x=J;if("resultCollection"!=J){$.getJSON("/application/listsurveys",{startIndex:m,isAscending:K,orderBy:J},function(L){B(L)})}else{$.getJSON("/application/listSurveysByResults",{startIndex:m,isAscending:n},function(L){B(L)})}}function B(J){$("#surveyListTable").empty();$.each(J.surveys,function(K,L){r(K,L)})}function t(){a();if(n){document.getElementById("executeSortByResults").text=LOC_RESULTS+c;I=n=false}else{document.getElementById("executeSortByResults").text=LOC_RESULTS+w;I=n=true}l("resultCollection",n)}function b(){a();if(j){document.getElementById("executeSortByPublisher").text=LOC_PUBLISHER+c;I=j=false}else{document.getElementById("executeSortByPublisher").text=LOC_PUBLISHER+w;I=j=true}l("ndgUser.username",j)}function h(){a();if(s){document.getElementById("executeSortByDatePublished").text=LOC_DATE_PUBLISHED+c;I=s=false}else{document.getElementById("executeSortByDatePublished").text=LOC_DATE_PUBLISHED+w;I=s=true}l("uploadDate",s)}function p(){a();if(G){document.getElementById("executeSortBySurveyName").text=LOC_SURVEY_NAME+c;G=false}else{document.getElementById("executeSortBySurveyName").text=LOC_SURVEY_NAME+w;G=true}l("title",G)}function a(){document.getElementById("executeSortBySurveyName").text=LOC_SURVEY_NAME;document.getElementById("executeSortByDatePublished").text=LOC_DATE_PUBLISHED;document.getElementById("executeSortByPublisher").text=LOC_PUBLISHER;document.getElementById("executeSortByResults").text=LOC_RESULTS}function r(J,K){$("#surveyListTable").append('<tr id="Survey'+K.id+'"><td id="testData">'+K.title+"<br>ID "+K.surveyId+"</td><td>"+new Date(K.uploadDate).toLocaleDateString()+"</td><td>"+K.ndgUser.username+'</td><td><a href="#" id="Item'+K.id+'">'+K.resultCollection+'</a></td><td><div class="menu" id="menu'+K.id+'" ><button type="button" class="buttonDownload" title="'+LOC_DOWNLOAD+'"/><button type="button" class="buttonUpload" title="'+LOC_UPLOAD+'"/><button type="button" class="buttonSend" title="'+LOC_SEND+'"/><button type="button" class="buttonEdit" title="'+LOC_EDIT+'"/><button type="button" class="buttonDuplicate" title="'+LOC_DUPLICATE+'"/><button type="button" class="buttonDelete" title="'+LOC_DELETE+'"/></div></td></tr>');
$("#Survey"+K.id).mouseover(K.id,function(L){A(L)});$("#Survey"+K.id).mouseout(K.id,function(L){E(L)});$("#Item"+K.id).click(K.id,function(L){ResultList.showResultList(L)});$("#menu"+K.id+" .buttonDownload").click(K.surveyId,function(L){v(L)});$("#menu"+K.id+" .buttonUpload").click(K.surveyId,function(L){F(L)});$("#menu"+K.id+" .buttonDelete").click(K.surveyId,function(L){d(L)});$("#menu"+K.id+" .buttonDuplicate").click(K.surveyId,function(L){g(L)});$("#menu"+K.id+" .buttonSend").click(K.surveyId,function(L){y(L)})}function k(J){if(--m<0){m=0}else{l(x,I);D()}J.preventDefault()}function e(J){if(++m>=H){m--}else{l(x,I);D()}J.preventDefault()}function v(J){window.location.href="management/"+J.data}function F(J){uploadDialog.dialog("open");$("#uploadSurveyId").val(J.data)}function d(J){confirmDeleteDialog.dialog("open");$("#buttonDeleteYes").click(J.data,function(K){$.post("/delete/"+K.data,function(L){confirmDeleteDialog.dialog("close");$("#surveyListTable").empty();l(x,G)});$("#buttonDeleteYes").unbind("click");$("#buttonDeleteNo").unbind("click")});$("#buttonDeleteNo").click(function(){$("#buttonDeleteYes").unbind("click");$("#buttonDeleteNo").unbind("click");confirmDeleteDialog.dialog("close")})}function g(J){$.post("/duplicate/"+J.data,function(K){$("#surveyListTable").empty();l(x,G)})}function y(J){SendSurvey.showUserList(J);sendSurveyDialog.dialog("open")}function C(){var J=$("#uploadSurveyResult").load(function(){var K=J.contents().find("body").find("pre").html();if(K==="success"){alert("success")}else{alert("failure")}J.unbind("load");uploadDialog.dialog("close");$(":file","#uploadForm").val("")});return true}function A(J){$("#menu"+J.data+" button").addClass("hover")}function E(J){$("#menu"+J.data+" button").removeClass("hover")}function i(){this.bgColor="#dbe4f1";document.getElementById("next_button").src="images/icon_next_on.jpg"}function f(){this.bgColor="#edf0f6";document.getElementById("next_button").src="images/icon_next_off.jpg"}function z(){this.bgColor="#dbe4f1";document.getElementById("prev_button").src="images/icon_previous_on.jpg"}function u(){this.bgColor="#edf0f6";document.getElementById("prev_button").src="images/icon_previous_off.jpg"}}();