const LOC_RESULTID="ResultId";const LOC_RESULTTITLE="Result Title";const LOC_DATESENT="Date Sent";const LOC_USER="User";const LOC_LOCATION="Location";const LOC_BACK_TO_SURVEY_LIST="Back To SurveyList";const LOC_EXPORT_RESULTS="Export Results";const LOC_EXPORT_ALL_RESULTS="Export All Results";var ResultList=function(){const t=" \u2191";const c=" \u2193";var l;var f=0;var D=1;var w="title";var E=true;var b=true;var x=true;var u=true;var A=true;var B=true;var s=new Array();function g(){$("#minimalist").empty();$("#executeBackToSurveyList").remove();$("#executeExportAllResults").remove();$("#executeExportResults").remove();s=new Array();SurveyList.showSurveyList()}function q(F,G){$("#resultListTable").append('<tr><td><input type="checkbox" id="resultCheckbox'+G.id+'"/></td><td>'+G.resultId+"</td><td>"+G.title+"</td><td>"+new Date(G.startTime)+"</td><td>"+G.ndgUser.username+"</td><td>"+(G.latitude!=null?"OK":"NO GPS")+"</td></tr>");$("#resultCheckbox"+G.id).click(G.resultId,function(H){e(H)})}function e(F){if(F.currentTarget.checked){if(-1==jQuery.inArray(F.data,s)){s.push(F.data)}}else{if(-1!=jQuery.inArray(F.data.toString(),s)){s.splice(jQuery.inArray(F.data.toString(),s),1)}}if(s.length>0){if(document.getElementById("executeExportResults")==null){$("#minimalist").before('<input type="button" id="executeExportResults" title="'+LOC_EXPORT_RESULTS+'" value="'+LOC_EXPORT_RESULTS+'"/>');$("#executeExportResults").click(function(){v()})}}else{$("#executeExportResults").remove()}}function v(){ExportResults.exportResults(l,s)}function r(){ExportResults.exportAllResults(l)}function y(F){$("#surveyListTable").empty();$.each(F.results,function(G,H){q(G,H)})}function k(F){l=F.data;$("#minimalist").empty();$("#minimalist").before('<a href="#" id="executeBackToSurveyList">'+LOC_BACK_TO_SURVEY_LIST+"</a>");$("#minimalist").before('<input type="button" id="executeExportAllResults" title="'+LOC_EXPORT_ALL_RESULTS+'" value="'+LOC_EXPORT_ALL_RESULTS+'"/>');$("#executeBackToSurveyList").click(function(){g()});$("#executeExportAllResults").click(function(){r()});$("#minimalist").append('<thead><tr><th scope="col"></th><th scope="col"><a href="#" id="executeSortByResultId"><b>'+LOC_RESULTID+'</b></th><th scope="col"><a href="#" id="executeSortByResultTitle"><b>'+LOC_RESULTTITLE+'</b></th><th scope="col"><a href="#" id="executeSortByDateSent"><b>'+LOC_DATESENT+'</b></th><th scope="col"><a href="#" id="executeSortByUser"><b>'+LOC_USER+'</b></th><th scope="col"><a href="#" id="executeSortByLocation"><b>'+LOC_LOCATION+'</b></th></tr></thead><tbody id="resultListTable"></tbody>');$("#executeSortByResultId").click(function(){h()});$("#executeSortByResultTitle").click(function(){z()});$("#executeSortByDateSent").click(function(){n()});$("#executeSortByUser").click(function(){o()});$("#executeSortByLocation").click(function(){p()});$.getJSON("/application/listresultscount",{surveyId:parseInt(F.data)},function(G){m(G)});$.getJSON("/application/listResults",{surveyId:parseInt(F.data),startIndex:0,isAscending:true,orderBy:"title"},function(G){y(G)})}function h(){a();if(b){document.getElementById("executeSortByResultId").text=LOC_RESULTID+c;b=false}else{document.getElementById("executeSortByResultId").text=LOC_RESULTID+t;b=true}j("resultId",b)}function z(){a();if(u){document.getElementById("executeSortByResultTitle").text=LOC_RESULTTITLE+c;u=false}else{document.getElementById("executeSortByResultTitle").text=LOC_RESULTTITLE+t;u=true}j("title",u)}function n(){a();if(x){document.getElementById("executeSortByDateSent").text=LOC_DATESENT+c;x=false}else{document.getElementById("executeSortByDateSent").text=LOC_DATESENT+t;x=true}j("startTime",x)}function o(){a();if(A){document.getElementById("executeSortByUser").text=LOC_USER+c;A=false}else{document.getElementById("executeSortByUser").text=LOC_USER+t;A=true}j("ndgUser.username",A)}function p(){a();if(B){document.getElementById("executeSortByLocation").text=LOC_LOCATION+c;B=false}else{document.getElementById("executeSortByLocation").text=LOC_LOCATION+t;
B=true}j("latitude",B)}function a(){document.getElementById("executeSortByResultId").text=LOC_RESULTID;document.getElementById("executeSortByResultTitle").text=LOC_RESULTTITLE;document.getElementById("executeSortByDateSent").text=LOC_DATESENT;document.getElementById("executeSortByUser").text=LOC_USER;document.getElementById("executeSortByLocation").text=LOC_LOCATION}function j(F,G){$("#resultListTable").empty();w=F;$.getJSON("/application/listResults",{surveyId:l,startIndex:f,isAscending:G,orderBy:F},function(H){y(H)})}function m(F){D=F.resultsCount;C()}function C(){$("#navi").empty();$("#navi").append('<a href="#" id="executePreviousButton"><img id="prev_button" src="images/icon_previous_off.jpg"></a>'+(f+1)+" of "+D+'<a href="#" id="executeNextButton"><img id="next_button" src="images/icon_next_off.jpg"></a>');$("#executePreviousButton").click(function(){i()});$("#executeNextButton").click(function(){d()})}function i(F){if(--f<0){f=0}else{j(w,E);C()}F.preventDefault()}function d(F){if(++f>=D){f--}else{j(w,E);C()}F.preventDefault()}return{showResultList:function(F){k(F)}}}();